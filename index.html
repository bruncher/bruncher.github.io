<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Portfolio</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main class="container">
    <header class="header">
      <h1>ðŸ“Š Crypto Market Overview</h1>
      <p>Live data visualized from CoinGecko API, updated every 15 minutes.</p>
    </header>

    <!-- Looker Dashboard Embed -->
    <section class="dashboard-section">
      <div class="dashboard-card fade-in">
        <iframe 
          src="https://lookerstudio.google.com/embed/reporting/XXXXXXXX/page/XXXX"
          frameborder="0" 
          allowfullscreen 
          loading="lazy"
          class="looker-embed">
        </iframe>
        <p class="update-note">Updated every 15 minutes</p>
      </div>
    </section>

    <!-- Data Collector Section -->
    <section class="service-section">
      <div class="service-card">
        <h2>ðŸ§© Data Collector Service</h2>
        <p>Node.js service for fetching and caching live crypto data from public APIs.</p>

        <div class="status-card" id="status-card">
          <p><strong>Status:</strong> <span id="status-text">Loading...</span></p>
          <p><strong>Last Fetch:</strong> <span id="last-fetch">â€“</span></p>
          <p><strong>Cache Age (sec):</strong> <span id="cache-age">â€“</span></p>
        </div>
      </div>
    </section>
  </main>

  <script>
    // Health check for backend
    async function checkHealth() {
      try {
        const res = await fetch("https://your-render-app.onrender.com/health");
        const data = await res.json();

        document.getElementById("status-text").textContent = data.status || "unknown";
        document.getElementById("last-fetch").textContent = data.lastFetch || "n/a";
        document.getElementById("cache-age").textContent = data.cacheAgeSec ?? "n/a";
      } catch (err) {
        document.getElementById("status-text").textContent = "error";
      }
    }
    checkHealth();
  </script>
</body>
</html>
